# TODO 리스트

## 진행 예정 작업

### 1. 히스토리 페이지 파일별 그룹화
- [x] 실행완료한 파일 목록을 만들기
- [x] 파일을 클릭하면 상세 보기 표시
  - 왼쪽: 크롭된 이미지
  - 오른쪽: 추출된 텍스트
- [x] 파일별로 OCR 기록 그룹화하여 표시

### 1-1. OCR History '대화하기' (파일 OCR 텍스트 기반 Q&A)
- [x] 파일명 옆 '대화하기' 버튼 추가
- [x] 레이어 팝업 채팅 UI 추가 (입력/전송/닫기)
- [x] 백엔드 API: `POST /chat/ocr-file` (DB에서 해당 파일(그룹) OCR 텍스트 로드 → Qwen2.5-VL 7B로 Q&A)
- [x] 채팅 입력창 텍스트 색상 검은색으로 고정
- [x] 입력창 하단 안내 문구 제거

### 1-2. (향후) RAG(벡터/임베딩) 기반으로 채팅 품질/성능 개선
- [ ] OCR 텍스트 청킹(chunking) 전략 설계 (페이지/영역 단위 + 길이 기준)
- [ ] 임베딩 생성 및 저장 (예: Ollama embedding 모델 또는 외부 임베딩 API)
- [ ] 벡터 저장소 선택 및 적용 (FAISS/Chroma/pgvector 등)
- [ ] 질의 시 Top-k 검색 → 검색된 청크만 컨텍스트로 전달 (토큰/속도 최적화)
- [ ] 출처 표시(페이지/ID/청크 인용) 및 “근거 없으면 모른다” 강제

### 1-3. (향후) 채팅 UX 고도화
- [ ] 스트리밍 응답(SSE)로 타이핑처럼 실시간 출력
- [ ] 대화 로그 저장/불러오기 (파일 그룹 단위로 DB 저장)
- [ ] 채팅창에서 “이 OCR 결과 수정/저장/다운로드” 같은 액션 버튼 연동

### 2. 다중 파일 업로드 및 실행
- [ ] 여러 개 파일을 업로드하는 기능
- [ ] 업로드된 파일 목록 표시
- [ ] 순차 실행 버튼 및 기능 구현
- [ ] 병렬 실행 버튼 및 기능 구현
- [ ] 각 파일의 실행 상태 표시 (대기 중, 처리 중, 완료, 실패)

### 3. 시스템 프롬프트 입력 UI
- [x] 프롬프트 입력 및 수정 기능
- [x] 프롬프트 localStorage 저장 기능
- [x] 저장된 프롬프트 목록 보기 및 불러오기
- [x] 백엔드 API에 프롬프트 전달 기능
- [x] OCR 처리 시 커스텀 프롬프트 적용 기능

### 4. 안정화/성능
- [ ] History 목록 응답 크기/속도 모니터링 (include_records=true 성능 점검)
- [ ] 대용량 DB에서 history 로딩 최적화 (페이지네이션/검색/필터)
- [ ] PPT→PDF 변환 실패 케이스 수집 및 UX 개선 (오류 메시지/재시도)

## 완료된 작업

- [x] 크롭된 이미지 저장 기능
- [x] 히스토리 페이지 UI 개선 (카드 레이아웃)
- [x] PDF 페이지 네비게이션 기능
- [x] 파일 업로드 진행 상황 표시
- [x] 이전 파일 정리 로직 개선
- [x] 여러 줄 패턴 반복 제거 기능
- [x] History 페이지 자동 새로고침 제거 (수동 새로고침만)
- [x] History 페이지 이전/다음 레코드 이동 기능
- [x] 같은 파일명이라도 새 업로드는 별도 그룹으로 표시
- [x] 크롭 영역 드래그 이동 기능
- [x] 크롭 완료 시 영역 추가/업데이트 버튼 UI 개선
- [x] 프롬프트 입력/수정 및 저장 기능
- [x] 저장된 프롬프트 목록 보기 및 불러오기
- [x] 서비스 타이틀 변경: IO-VISION OCR - 특정영역추출 서비스


